(function e(t,n,r){function i(s,u){if(!n[s]){if(!t[s]){var l=typeof require=="function"&&require;if(!u&&l)return l(s,!0);if(o)return o(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[s].exports}var o=typeof require=="function"&&require;for(var s=0;s<r.length;s++)i(r[s]);return i})({1:[function(e,t,n){var r;r=function(t){var n;n=t.angular.module("ngReel",[]);e("./lib/factory")(n);e("./lib/provider")(n);return e("./lib/directive")(n)};if((typeof window!=="undefined"&&window!==null?window.angular:void 0)!=null){r(window)}t.exports=r},{"./lib/directive":2,"./lib/factory":3,"./lib/provider":4}],2:[function(e,t,n){t.exports=function(e){return e.directive("ngReel",["$reel","Reel",function(e,t){return{scope:true,link:function(n,r,i){var o;o=new t(n,r,i);if(i.ngReelAuto!=null){return e.autoScroll(o)}}}}])}},{}],3:[function(e,t,n){t.exports=function(e){return e.factory("Reel",["$reel","$http","$window",function(e,t,n){var r;return r=function(){function r(e,t,r){var i,o,s;this.scope=e;this.attrs=r;this.element=t[0];o=this.attrs.ngReel.split(/\s/),this.resource=o[0],i=o[1],this.name=o[2];this.scope[this.name]=[];this.feed=10;this.log=[];if(this.attrs.ngReelRemember!=null){s=this.remind(),this.begin=s[0],this.end=s[1]}if(this.begin==null){this.begin=0}if(this.end==null){this.end=this.feed}setTimeout(function(e){return function(){var t;e.response();t=n;if(e.attrs.ngReelOverflow!=null){t=e.element}return t.addEventListener("scroll",function(){return e.response()})}}(this))}r.prototype.response=function(){var e;if(this.busy!=null){return}if(this.attrs.ngReelStack!=null){if(this.isEndOfScroll()){this.request(function(e){return function(t){e.add(t);return e.response()}}(this))}return}e=this.get(this.feed);if(this.isScrollAfter(e)){this.request(function(t){return function(n){t.add(n);t.remove(e);return t.response()}}(this));return}if(this.isUnmetFeed()||this.isEndOfScroll()){this.request(function(e){return function(t){e.add(t);return e.response()}}(this))}};r.prototype.request=function(n){this.busy=true;return t({url:this.resource,method:"GET",params:e.getParams(this)}).success(function(e){return function(t){if(t.length===0){if(e.begin===0){return console.error("resource Not found")}if(e.attrs.ngReelStack!=null){return}e.begin=0;e.end=e.feed;return e.request(n)}if(e.attrs.ngReelRemember!=null){if(e.log.length>=2){e.log.shift()}e.log.push(e.begin+","+e.end);e.remember(e.log[0])}e.begin=parseInt(e.begin)+parseInt(e.feed);e.end=parseInt(e.end)+parseInt(e.feed);e.busy=null;return n(t)}}(this))};r.prototype.add=function(e){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++){t=e[n];i.push(this.scope[this.name].push(t))}return i};r.prototype.remove=function(e){var t,n,r,i;this.scroll(-e.height);i=[];for(n=0,r=e.length;n<r;n++){t=e[n];i.push(this.scope[this.name].shift())}return i};r.prototype.get=function(e){var t,n,r,i,o,s;if(e==null){e=null}t=this.element.querySelectorAll("[ng-repeat]");r=[];r.height=0;for(i=o=0,s=t.length;o<s;i=++o){n=t[i];if(e!=null&&i>=e){break}r.push(n);r.height+=n.offsetHeight}return r};r.prototype.scroll=function(e){if(e==null){e=3}if(this.attrs.ngReelOverflow!=null){return this.element.scrollTop+=e}else{return n.scrollBy(0,e)}};r.prototype.getName=function(){return"ngReel:"+this.attrs.ngReel};r.prototype.remember=function(e){return localStorage.setItem(this.getName(),e)};r.prototype.remind=function(){var e;return((e=localStorage.getItem(this.getName()))!=null?e.split(","):void 0)||[null,null]};r.prototype.forget=function(){return localStorage.removeItem(this.getName())};r.prototype.isUnmetFeed=function(){return this.get().length<this.feed};r.prototype.isScrollAfter=function(e){var t,r;if(this.attrs.ngReelOverflow!=null){r=this.element.scrollTop}else{r=n.scrollY-this.element.offsetTop}return t=e.height<r};r.prototype.isEndOfScroll=function(){var e;if(this.attrs.ngReelOverflow!=null){e=this.element.scrollHeight<=this.element.scrollTop+this.element.offsetHeight}else{e=n.document.body.offsetHeight<=n.scrollY+n.innerHeight}return e};return r}()}])}},{}],4:[function(e,t,n){t.exports=function(e){return e.provider("$reel",function(){var e,t;t=function(e){return{_start:e.begin,_end:e.end}};e=true;return{getParams:function(e){return t=e},disableZeroMargin:function(){return e=false},$get:["$window",function(n){if(e){n.angular.element(document).find("head").append('<style type="text/css">\n  @charset "UTF-8";\n  [ng-reel],[ng-reel] *{margin:0;}\n</style>')}return{getParams:t,autoScroll:function(e){var t;n.requestAnimationFrame(function(){return t()});return t=function(r){return function(){e.scroll();return n.requestAnimationFrame(t)}}(this)}}}]}})}},{}]},{},[1]);
//# sourceMappingURL=angular-reel.min.js.map